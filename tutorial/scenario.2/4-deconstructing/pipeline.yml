---
resources:
  - name: super-app
    type: git
    source:
      uri: https://github.com/schmidtks/concourse-tutorial
      branch: ci

jobs:
  - name: Testing
    plan:
    - get: super-app
      trigger: true

    - aggregate:
      - task: lint
        file: super-app/tutorial/scenario.2/4-deconstructing/tasks/lint.yml

      - task: unit
        file: super-app/tutorial/scenario.2/4-deconstructing/tasks/unit.yml

  - name: Building & Integration
    plan:
    - get: super-app
      passed: ["Testing"]
      trigger: true

    - task: build
      file: super-app/tutorial/scenario.2/4-deconstructing/tasks/build.yml

    - task: integration test
      file: super-app/tutorial/scenario.2/4-deconstructing/tasks/integeration.yml
